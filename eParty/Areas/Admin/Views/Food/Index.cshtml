
@{
    ViewBag.Title = "Index";
    Layout = "~/Areas/Admin/Views/Shared/_LayoutAdmin.cshtml";
}

<div class="food-container" style="padding-top: 100px;">
    <h2>@ViewBag.Title</h2>

    <div class="mb-3 d-flex gap-2">
        <input type="text" id="filterInput" class="form-control" placeholder="Tìm kiếm theo tên món..." onkeyup="filterTable()">
        <select id="typeFilter" class="form-select" onchange="filterTable()">
            <option value="">Tất cả loại</option>
            <option value="Món chính">Món chính</option>
            <option value="Món khai vị">Món khai vị</option>
            <option value="Ăn nhanh">Ăn nhanh</option>
        </select>
    </div>


    <table id="foodTable" class="table table-striped table-bordered">
        <thead class="table-dark">
            <tr>
                <th>Tên món</th>
                <th>Loại</th>
                <th>Giá</th>
                <th>Hành động</th>
            </tr>
        </thead>
        <tbody>
        </tbody>
    </table>

    <!-- Popup chi tiết -->
    <div id="popup" class="popup">
        <div class="popup-content">
            <span class="close" onclick="closePopup()">&times;</span>
            <h2 id="foodName"></h2>
            <p><strong>Loại:</strong> <span id="foodType"></span></p>
            <p><strong>Giá:</strong> <span id="foodPrice"></span></p>
            <p><strong>Mô tả:</strong></p>
            <p id="foodDescription"></p>
        </div>
    </div>
</div>
@section Styles {
    <style>
        .popup {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0,0,0,0.5);
        }

        .popup-content {
            background-color: #fff;
            margin: 10% auto;
            padding: 20px;
            width: 50%;
            border-radius: 5px;
            position: relative;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
        }

        .close {
            position: absolute;
            top: 10px;
            right: 15px;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
        }

        #filterInput {
            max-width: 400px;
        }
    </style>
}

@section Scripts {
    <script>
            const foods = [
                { name: "Phở bò", type: "Món chính", price: "50,000 VND", description: "Phở bò thơm ngon, nước dùng đậm đà, kèm bánh phở mềm và rau thơm." },
                { name: "Gỏi cuốn", type: "Món khai vị", price: "30,000 VND", description: "Gỏi cuốn tươi ngon với tôm, thịt, rau sống và bún, chấm với nước mắm chua ngọt." },
                { name: "Bánh mì", type: "Ăn nhanh", price: "25,000 VND", description: "Bánh mì giòn rụm với pate, thịt nguội, rau và nước sốt đặc trưng." },
                { name: "Bún chả", type: "Món chính", price: "45,000 VND", description: "Bún chả với thịt nướng thơm lừng, nước chấm chua ngọt hài hòa." }
            ];

            const tableBody = document.querySelector("#foodTable tbody");

            function renderTable(data) {
                tableBody.innerHTML = ""; // Xóa dữ liệu cũ
                data.forEach((food, index) => {
                    const row = document.createElement("tr");
                    row.innerHTML = `
                                    <td>${food.name}</td>
                                    <td>${food.type}</td>
                                    <td>${food.price}</td>
                                    <td><button class="btn btn-primary btn-sm" onclick="showDetails(${index})">Xem chi tiết</button></td>
                                `;
                    tableBody.appendChild(row);
                });
            }

            renderTable(foods);

            // Bộ lọc
            function filterTable() {
                const filter = document.getElementById("filterInput").value.toLowerCase();
                const filtered = foods.filter(f => f.name.toLowerCase().includes(filter) || f.type.toLowerCase().includes(filter));
                renderTable(filtered);
            }

            // Hiển thị popup
            function showDetails(index) {
                const food = foods[index];
                document.getElementById("foodName").innerText = food.name;
                document.getElementById("foodType").innerText = food.type;
                document.getElementById("foodPrice").innerText = food.price;
                document.getElementById("foodDescription").innerText = food.description;
                document.getElementById("popup").style.display = "block";
            }

            // Đóng popup
            function closePopup() {
                document.getElementById("popup").style.display = "none";
            }

            window.onclick = function (event) {
                const popup = document.getElementById("popup");
                if (event.target == popup) {
                    popup.style.display = "none";
                }
            }
    </script>
}




